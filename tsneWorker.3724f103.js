parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"wIHY":[function(require,module,exports) {
"use strict";var e,t="object"==typeof Reflect?Reflect:null,n=t&&"function"==typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};function r(e){console&&console.warn&&console.warn(e)}e=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}module.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function f(e,t,n,i){var o,s,f;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),f=s[t]),void 0===f)f=s[t]=n,++e._eventsCount;else if("function"==typeof f?f=s[t]=i?[n,f]:[f,n]:i?f.unshift(n):f.push(n),(o=u(e))>0&&f.length>o&&!f.warned){f.warned=!0;var p=new Error("Possible EventEmitter memory leak detected. "+f.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");p.name="MaxListenersExceededWarning",p.emitter=e,p.type=t,p.count=f.length,r(p)}return e}function p(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,n(this.listener,this.target,e))}function v(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=p.bind(r);return i.listener=n,r.wrapFn=i,i}function h(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?y(i):c(i,i.length)}function a(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function c(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function l(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function y(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var u=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw u.context=s,u}var f=o[e];if(void 0===f)return!1;if("function"==typeof f)n(f,this,t);else{var p=f.length,v=c(f,p);for(r=0;r<p;++r)n(v[r],this,t)}return!0},o.prototype.addListener=function(e,t){return f(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return f(this,e,t,!0)},o.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,v(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,v(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,s;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():l(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return h(this,e,!0)},o.prototype.rawListeners=function(e){return h(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):a.call(e,t)},o.prototype.listenerCount=a,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]};
},{}],"GMDL":[function(require,module,exports) {
"use strict";function r(r){for(var e=new Array(r),t=0;t<r;++t)e[t]=t;return e}module.exports=r;
},{}],"hr1c":[function(require,module,exports) {
function t(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function n(n){return"function"==typeof n.readFloatLE&&"function"==typeof n.slice&&t(n.slice(0,0))}module.exports=function(o){return null!=o&&(t(o)||n(o)||!!o._isBuffer)};
},{}],"GxWY":[function(require,module,exports) {
var t=require("iota-array"),r=require("is-buffer"),n="undefined"!=typeof Float64Array;function e(t,r){return t[0]-r[0]}function o(){var t,r=this.stride,n=new Array(r.length);for(t=0;t<n.length;++t)n[t]=[Math.abs(r[t]),t];n.sort(e);var o=new Array(n.length);for(t=0;t<o.length;++t)o[t]=n[t][1];return o}function i(r,n){var e=["View",n,"d",r].join("");n<0&&(e="View_Nil"+r);var i="generic"===r;if(-1===n){var s="function "+e+"(a){this.data=a;};var proto="+e+".prototype;proto.dtype='"+r+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+e+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+e+"(a){return new "+e+"(a);}";return new Function(s)()}if(0===n){s="function "+e+"(a,d) {this.data = a;this.offset = d};var proto="+e+".prototype;proto.dtype='"+r+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+e+"_copy() {return new "+e+"(this.data,this.offset)};proto.pick=function "+e+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+e+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+e+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+e+"(a,b,c,d){return new "+e+"(a,d)}";return new Function("TrivialArray",s)(a[r][0])}s=["'use strict'"];var u=t(n),p=u.map(function(t){return"i"+t}),f="this.offset+"+u.map(function(t){return"this.stride["+t+"]*i"+t}).join("+"),h=u.map(function(t){return"b"+t}).join(","),c=u.map(function(t){return"c"+t}).join(",");s.push("function "+e+"(a,"+h+","+c+",d){this.data=a","this.shape=["+h+"]","this.stride=["+c+"]","this.offset=d|0}","var proto="+e+".prototype","proto.dtype='"+r+"'","proto.dimension="+n),s.push("Object.defineProperty(proto,'size',{get:function "+e+"_size(){return "+u.map(function(t){return"this.shape["+t+"]"}).join("*"),"}})"),1===n?s.push("proto.order=[0]"):(s.push("Object.defineProperty(proto,'order',{get:"),n<4?(s.push("function "+e+"_order(){"),2===n?s.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===n&&s.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):s.push("ORDER})")),s.push("proto.set=function "+e+"_set("+p.join(",")+",v){"),i?s.push("return this.data.set("+f+",v)}"):s.push("return this.data["+f+"]=v}"),s.push("proto.get=function "+e+"_get("+p.join(",")+"){"),i?s.push("return this.data.get("+f+")}"):s.push("return this.data["+f+"]}"),s.push("proto.index=function "+e+"_index(",p.join(),"){return "+f+"}"),s.push("proto.hi=function "+e+"_hi("+p.join(",")+"){return new "+e+"(this.data,"+u.map(function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")}).join(",")+","+u.map(function(t){return"this.stride["+t+"]"}).join(",")+",this.offset)}");var d=u.map(function(t){return"a"+t+"=this.shape["+t+"]"}),l=u.map(function(t){return"c"+t+"=this.stride["+t+"]"});s.push("proto.lo=function "+e+"_lo("+p.join(",")+"){var b=this.offset,d=0,"+d.join(",")+","+l.join(","));for(var b=0;b<n;++b)s.push("if(typeof i"+b+"==='number'&&i"+b+">=0){d=i"+b+"|0;b+=c"+b+"*d;a"+b+"-=d}");s.push("return new "+e+"(this.data,"+u.map(function(t){return"a"+t}).join(",")+","+u.map(function(t){return"c"+t}).join(",")+",b)}"),s.push("proto.step=function "+e+"_step("+p.join(",")+"){var "+u.map(function(t){return"a"+t+"=this.shape["+t+"]"}).join(",")+","+u.map(function(t){return"b"+t+"=this.stride["+t+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(b=0;b<n;++b)s.push("if(typeof i"+b+"==='number'){d=i"+b+"|0;if(d<0){c+=b"+b+"*(a"+b+"-1);a"+b+"=ceil(-a"+b+"/d)}else{a"+b+"=ceil(a"+b+"/d)}b"+b+"*=d}");s.push("return new "+e+"(this.data,"+u.map(function(t){return"a"+t}).join(",")+","+u.map(function(t){return"b"+t}).join(",")+",c)}");var j=new Array(n),y=new Array(n);for(b=0;b<n;++b)j[b]="a[i"+b+"]",y[b]="b[i"+b+"]";s.push("proto.transpose=function "+e+"_transpose("+p+"){"+p.map(function(t,r){return t+"=("+t+"===undefined?"+r+":"+t+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+e+"(this.data,"+j.join(",")+","+y.join(",")+",this.offset)}"),s.push("proto.pick=function "+e+"_pick("+p+"){var a=[],b=[],c=this.offset");for(b=0;b<n;++b)s.push("if(typeof i"+b+"==='number'&&i"+b+">=0){c=(c+this.stride["+b+"]*i"+b+")|0}else{a.push(this.shape["+b+"]);b.push(this.stride["+b+"])}");return s.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),s.push("return function construct_"+e+"(data,shape,stride,offset){return new "+e+"(data,"+u.map(function(t){return"shape["+t+"]"}).join(",")+","+u.map(function(t){return"stride["+t+"]"}).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",s.join("\n"))(a[r],o)}function s(t){if(r(t))return"buffer";if(n)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(t)?"array":"generic"}var a={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};function u(t,r,n,e){if(void 0===t)return(0,a.array[0])([]);"number"==typeof t&&(t=[t]),void 0===r&&(r=[t.length]);var o=r.length;if(void 0===n){n=new Array(o);for(var u=o-1,p=1;u>=0;--u)n[u]=p,p*=r[u]}if(void 0===e){e=0;for(u=0;u<o;++u)n[u]<0&&(e-=(r[u]-1)*n[u])}for(var f=s(t),h=a[f];h.length<=o+1;)h.push(i(f,h.length-1));return(0,h[o+1])(t,r,n,e)}module.exports=u;
},{"iota-array":"GMDL","is-buffer":"hr1c"}],"Qijo":[function(require,module,exports) {
"use strict";function n(n,t){for(var r=1,e=n.length,o=n[0],i=n[0],u=1;u<e;++u)if(i=o,t(o=n[u],i)){if(u===r){r++;continue}n[r++]=o}return n.length=r,n}function t(n){for(var t=1,r=n.length,e=n[0],o=n[0],i=1;i<r;++i,o=e)if(o=e,(e=n[i])!==o){if(i===t){t++;continue}n[t++]=e}return n.length=t,n}function r(r,e,o){return 0===r.length?r:e?(o||r.sort(e),n(r,e)):(o||r.sort(),t(r))}module.exports=r;
},{}],"21+h":[function(require,module,exports) {
"use strict";var r=require("uniq");function n(r,n,e){var s,o,a=r.length,i=n.arrayArgs.length,t=n.indexArgs.length>0,h=[],p=[],u=0,c=0;for(s=0;s<a;++s)p.push(["i",s,"=0"].join(""));for(o=0;o<i;++o)for(s=0;s<a;++s)c=u,u=r[s],0===s?p.push(["d",o,"s",s,"=t",o,"p",u].join("")):p.push(["d",o,"s",s,"=(t",o,"p",u,"-s",c,"*t",o,"p",c,")"].join(""));for(p.length>0&&h.push("var "+p.join(",")),s=a-1;s>=0;--s)u=r[s],h.push(["for(i",s,"=0;i",s,"<s",u,";++i",s,"){"].join(""));for(h.push(e),s=0;s<a;++s){for(c=u,u=r[s],o=0;o<i;++o)h.push(["p",o,"+=d",o,"s",s].join(""));t&&(s>0&&h.push(["index[",c,"]-=s",c].join("")),h.push(["++index[",u,"]"].join(""))),h.push("}")}return h.join("\n")}function e(r,e,s,o){for(var a=e.length,i=s.arrayArgs.length,t=s.blockSize,h=s.indexArgs.length>0,p=[],u=0;u<i;++u)p.push(["var offset",u,"=p",u].join(""));for(u=r;u<a;++u)p.push(["for(var j"+u+"=SS[",e[u],"]|0;j",u,">0;){"].join("")),p.push(["if(j",u,"<",t,"){"].join("")),p.push(["s",e[u],"=j",u].join("")),p.push(["j",u,"=0"].join("")),p.push(["}else{s",e[u],"=",t].join("")),p.push(["j",u,"-=",t,"}"].join("")),h&&p.push(["index[",e[u],"]=j",u].join(""));for(u=0;u<i;++u){for(var c=["offset"+u],f=r;f<a;++f)c.push(["j",f,"*t",u,"p",e[f]].join(""));p.push(["p",u,"=(",c.join("+"),")"].join(""))}p.push(n(e,s,o));for(u=r;u<a;++u)p.push("}");return p.join("\n")}function s(r){for(var n=0,e=r[0].length;n<e;){for(var s=1;s<r.length;++s)if(r[s][n]!==r[0][n])return n;++n}return n}function o(r,n,e){for(var s=r.body,o=[],a=[],i=0;i<r.args.length;++i){var t=r.args[i];if(!(t.count<=0)){var h=new RegExp(t.name,"g"),p="",u=n.arrayArgs.indexOf(i);switch(n.argTypes[i]){case"offset":var c=n.offsetArgIndex.indexOf(i);u=n.offsetArgs[c].array,p="+q"+c;case"array":p="p"+u+p;var f="l"+i,l="a"+u;if(0===n.arrayBlockIndices[u])1===t.count?"generic"===e[u]?t.lvalue?(o.push(["var ",f,"=",l,".get(",p,")"].join("")),s=s.replace(h,f),a.push([l,".set(",p,",",f,")"].join(""))):s=s.replace(h,[l,".get(",p,")"].join("")):s=s.replace(h,[l,"[",p,"]"].join("")):"generic"===e[u]?(o.push(["var ",f,"=",l,".get(",p,")"].join("")),s=s.replace(h,f),t.lvalue&&a.push([l,".set(",p,",",f,")"].join(""))):(o.push(["var ",f,"=",l,"[",p,"]"].join("")),s=s.replace(h,f),t.lvalue&&a.push([l,"[",p,"]=",f].join("")));else{for(var g=[t.name],j=[p],d=0;d<Math.abs(n.arrayBlockIndices[u]);d++)g.push("\\s*\\[([^\\]]+)\\]"),j.push("$"+(d+1)+"*t"+u+"b"+d);if(h=new RegExp(g.join(""),"g"),p=j.join("+"),"generic"===e[u])throw new Error("cwise: Generic arrays not supported in combination with blocks!");s=s.replace(h,[l,"[",p,"]"].join(""))}break;case"scalar":s=s.replace(h,"Y"+n.scalarArgs.indexOf(i));break;case"index":s=s.replace(h,"index");break;case"shape":s=s.replace(h,"shape")}}}return[o.join("\n"),s,a.join("\n")].join("\n").trim()}function a(r){for(var n=new Array(r.length),e=!0,s=0;s<r.length;++s){var o=r[s],a=o.match(/\d+/);a=a?a[0]:"",0===o.charAt(0)?n[s]="u"+o.charAt(1)+a:n[s]=o.charAt(0)+a,s>0&&(e=e&&n[s]===n[s-1])}return e?n[0]:n.join("")}function i(i,t){for(var h=t[1].length-Math.abs(i.arrayBlockIndices[0])|0,p=new Array(i.arrayArgs.length),u=new Array(i.arrayArgs.length),c=0;c<i.arrayArgs.length;++c)u[c]=t[2*c],p[c]=t[2*c+1];var f=[],l=[],g=[],j=[],d=[];for(c=0;c<i.arrayArgs.length;++c){i.arrayBlockIndices[c]<0?(g.push(0),j.push(h),f.push(h),l.push(h+i.arrayBlockIndices[c])):(g.push(i.arrayBlockIndices[c]),j.push(i.arrayBlockIndices[c]+h),f.push(0),l.push(i.arrayBlockIndices[c]));for(var v=[],y=0;y<p[c].length;y++)g[c]<=p[c][y]&&p[c][y]<j[c]&&v.push(p[c][y]-g[c]);d.push(v)}var A=["SS"],b=["'use strict'"],x=[];for(y=0;y<h;++y)x.push(["s",y,"=SS[",y,"]"].join(""));for(c=0;c<i.arrayArgs.length;++c){A.push("a"+c),A.push("t"+c),A.push("p"+c);for(y=0;y<h;++y)x.push(["t",c,"p",y,"=t",c,"[",g[c]+y,"]"].join(""));for(y=0;y<Math.abs(i.arrayBlockIndices[c]);++y)x.push(["t",c,"b",y,"=t",c,"[",f[c]+y,"]"].join(""))}for(c=0;c<i.scalarArgs.length;++c)A.push("Y"+c);if(i.shapeArgs.length>0&&x.push("shape=SS.slice(0)"),i.indexArgs.length>0){var k=new Array(h);for(c=0;c<h;++c)k[c]="0";x.push(["index=[",k.join(","),"]"].join(""))}for(c=0;c<i.offsetArgs.length;++c){var w=i.offsetArgs[c],I=[];for(y=0;y<w.offset.length;++y)0!==w.offset[y]&&(1===w.offset[y]?I.push(["t",w.array,"p",y].join("")):I.push([w.offset[y],"*t",w.array,"p",y].join("")));0===I.length?x.push("q"+c+"=0"):x.push(["q",c,"=",I.join("+")].join(""))}var m=r([].concat(i.pre.thisVars).concat(i.body.thisVars).concat(i.post.thisVars));(x=x.concat(m)).length>0&&b.push("var "+x.join(","));for(c=0;c<i.arrayArgs.length;++c)b.push("p"+c+"|=0");i.pre.body.length>3&&b.push(o(i.pre,i,u));var B=o(i.body,i,u),S=s(d);S<h?b.push(e(S,d[0],i,B)):b.push(n(d[0],i,B)),i.post.body.length>3&&b.push(o(i.post,i,u)),i.debug&&console.log("-----Generated cwise routine for ",t,":\n"+b.join("\n")+"\n----------");var q=[i.funcName||"unnamed","_cwise_loop_",p[0].join("s"),"m",S,a(u)].join("");return new Function(["function ",q,"(",A.join(","),"){",b.join("\n"),"} return ",q].join(""))()}module.exports=i;
},{"uniq":"Qijo"}],"3Kxc":[function(require,module,exports) {
"use strict";var r=require("./compile.js");function a(a){var s=["'use strict'","var CACHED={}"],e=[],n=a.funcName+"_cwise_thunk";s.push(["return function ",n,"(",a.shimArgs.join(","),"){"].join(""));for(var o=[],h=[],i=[["array",a.arrayArgs[0],".shape.slice(",Math.max(0,a.arrayBlockIndices[0]),a.arrayBlockIndices[0]<0?","+a.arrayBlockIndices[0]+")":")"].join("")],p=[],t=[],c=0;c<a.arrayArgs.length;++c){var u=a.arrayArgs[c];e.push(["t",u,"=array",u,".dtype,","r",u,"=array",u,".order"].join("")),o.push("t"+u),o.push("r"+u),h.push("t"+u),h.push("r"+u+".join()"),i.push("array"+u+".data"),i.push("array"+u+".stride"),i.push("array"+u+".offset|0"),c>0&&(p.push("array"+a.arrayArgs[0]+".shape.length===array"+u+".shape.length+"+(Math.abs(a.arrayBlockIndices[0])-Math.abs(a.arrayBlockIndices[c]))),t.push("array"+a.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[0])+"]===array"+u+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[c])+"]"))}a.arrayArgs.length>1&&(s.push("if (!("+p.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),s.push("for(var shapeIndex=array"+a.arrayArgs[0]+".shape.length-"+Math.abs(a.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),s.push("if (!("+t.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),s.push("}"));for(c=0;c<a.scalarArgs.length;++c)i.push("scalar"+a.scalarArgs[c]);return e.push(["type=[",h.join(","),"].join()"].join("")),e.push("proc=CACHED[type]"),s.push("var "+e.join(",")),s.push(["if(!proc){","CACHED[type]=proc=compile([",o.join(","),"])}","return proc(",i.join(","),")}"].join("")),a.debug&&console.log("-----Generated thunk:\n"+s.join("\n")+"\n----------"),new Function("compile",s.join("\n"))(r.bind(void 0,a))}module.exports=a;
},{"./compile.js":"21+h"}],"Ki0I":[function(require,module,exports) {
"use strict";var r=require("./lib/thunk.js");function e(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function s(s){var o=new e;o.pre=s.pre,o.body=s.body,o.post=s.post;var a=s.args.slice(0);o.argTypes=a;for(var t=0;t<a.length;++t){var n=a[t];if("array"===n||"object"==typeof n&&n.blockIndices){if(o.argTypes[t]="array",o.arrayArgs.push(t),o.arrayBlockIndices.push(n.blockIndices?n.blockIndices:0),o.shimArgs.push("array"+t),t<o.pre.args.length&&o.pre.args[t].count>0)throw new Error("cwise: pre() block may not reference array args");if(t<o.post.args.length&&o.post.args[t].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===n)o.scalarArgs.push(t),o.shimArgs.push("scalar"+t);else if("index"===n){if(o.indexArgs.push(t),t<o.pre.args.length&&o.pre.args[t].count>0)throw new Error("cwise: pre() block may not reference array index");if(t<o.body.args.length&&o.body.args[t].lvalue)throw new Error("cwise: body() block may not write to array index");if(t<o.post.args.length&&o.post.args[t].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===n){if(o.shapeArgs.push(t),t<o.pre.args.length&&o.pre.args[t].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(t<o.body.args.length&&o.body.args[t].lvalue)throw new Error("cwise: body() block may not write to array shape");if(t<o.post.args.length&&o.post.args[t].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof n||!n.offset)throw new Error("cwise: Unknown argument type "+a[t]);o.argTypes[t]="offset",o.offsetArgs.push({array:n.array,offset:n.offset}),o.offsetArgIndex.push(t)}}if(o.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(o.pre.args.length>a.length)throw new Error("cwise: Too many arguments in pre() block");if(o.body.args.length>a.length)throw new Error("cwise: Too many arguments in body() block");if(o.post.args.length>a.length)throw new Error("cwise: Too many arguments in post() block");return o.debug=!!s.printCode||!!s.debug,o.funcName=s.funcName||"cwise",o.blockSize=s.blockSize||64,r(o)}module.exports=s;
},{"./lib/thunk.js":"3Kxc"}],"isho":[function(require,module,exports) {
"use strict";var a=require("cwise-compiler"),r={body:"",args:[],thisVars:[],localVars:[]};function s(a){if(!a)return r;for(var s=0;s<a.args.length;++s){var t=a.args[s];a.args[s]=0===s?{name:t,lvalue:!0,rvalue:!!a.rvalue,count:a.count||1}:{name:t,lvalue:!1,rvalue:!0,count:1}}return a.thisVars||(a.thisVars=[]),a.localVars||(a.localVars=[]),a}function t(r){return a({args:r.args,pre:s(r.pre),body:s(r.body),post:s(r.proc),funcName:r.funcName})}function i(a){for(var r=[],s=0;s<a.args.length;++s)r.push("a"+s);return new Function("P",["return function ",a.funcName,"_ndarrayops(",r.join(","),") {P(",r.join(","),");return a0}"].join(""))(t(a))}var e={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var a in e){var r=e[a];exports[a]=i({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:a}),exports[a+"eq"]=i({args:["array","array"],body:{args:["a","b"],body:"a"+r+"=b"},rvalue:!0,funcName:a+"eq"}),exports[a+"s"]=i({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:a+"s"}),exports[a+"seq"]=i({args:["array","scalar"],body:{args:["a","s"],body:"a"+r+"=s"},rvalue:!0,funcName:a+"seq"})}}();var o={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var a in o){var r=o[a];exports[a]=i({args:["array","array"],body:{args:["a","b"],body:"a="+r+"b"},funcName:a}),exports[a+"eq"]=i({args:["array"],body:{args:["a"],body:"a="+r+"a"},rvalue:!0,count:2,funcName:a+"eq"})}}();var n={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var a in n){var r=n[a];exports[a]=i({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+r+"c"},funcName:a}),exports[a+"s"]=i({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+r+"s"},funcName:a+"s"}),exports[a+"eq"]=i({args:["array","array"],body:{args:["a","b"],body:"a=a"+r+"b"},rvalue:!0,count:2,funcName:a+"eq"}),exports[a+"seq"]=i({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+r+"s"},rvalue:!0,count:2,funcName:a+"seq"})}}();var _=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var a=0;a<_.length;++a){var r=_[a];exports[r]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:r}),exports[r+"eq"]=i({args:["array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"})}}();var l=["max","min","atan2","pow"];!function(){for(var a=0;a<l.length;++a){var r=l[a];exports[r]=i({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r}),exports[r+"s"]=i({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:r+"s"}),exports[r+"eq"]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"eq"}),exports[r+"seq"]=i({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"seq"})}}();var h=["atan2","pow"];!function(){for(var a=0;a<h.length;++a){var r=h[a];exports[r+"op"]=i({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"op"}),exports[r+"ops"]=i({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:r+"ops"}),exports[r+"opeq"]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opeq"}),exports[r+"opseq"]=i({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+r,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:r+"opseq"})}}(),exports.any=a({args:["array"],pre:r,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),exports.all=a({args:["array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),exports.sum=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),exports.prod=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),exports.norm2squared=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),exports.norm2=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),exports.norminf=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),exports.norm1=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),exports.sup=a({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),exports.inf=a({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),exports.argmin=a({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),exports.argmax=a({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),exports.random=i({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),exports.assign=i({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),exports.assigns=i({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),exports.equals=a({args:["array","array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"});
},{"cwise-compiler":"Ki0I"}],"SiyP":[function(require,module,exports) {
module.exports=require("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64});
},{"cwise-compiler":"Ki0I"}],"Ibk7":[function(require,module,exports) {
"use strict";var r=require("ndarray"),e=require("./doConvert.js");module.exports=function(t,n){for(var a=[],o=t,u=1;Array.isArray(o);)a.push(o.length),u*=o.length,o=o[0];return 0===a.length?r():(n||(n=r(new Float64Array(u),a)),e(n,t),n)};
},{"ndarray":"GxWY","./doConvert.js":"SiyP"}],"HwLA":[function(require,module,exports) {
"use strict";function r(e,n,t){var u=0|e[t];if(u<=0)return[];var f,o=new Array(u);if(t===e.length-1)for(f=0;f<u;++f)o[f]=n;else for(f=0;f<u;++f)o[f]=r(e,n,t+1);return o}function e(r,e){var n,t;for(n=new Array(r),t=0;t<r;++t)n[t]=e;return n}function n(n,t){switch(void 0===t&&(t=0),typeof n){case"number":if(n>0)return e(0|n,t);break;case"object":if("number"==typeof n.length)return r(n,t,0)}return[]}module.exports=n;
},{}],"EB52":[function(require,module,exports) {
var define;
var e;!function(t,n){"use strict";"function"==typeof e&&e.amd?e(["exports"],n):"undefined"!=typeof exports?n(exports):n(t.esprima={})}(this,function(e){"use strict";var t,n,r,a,i,o,c,l,s,u,m,p,d,f,h,y,S,g;function v(e,t){if(!e)throw new Error("ASSERT: "+t)}function k(e){return e>=48&&e<=57}function b(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function E(e){return"01234567".indexOf(e)>=0}function x(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function C(e){return 10===e||13===e||8232===e||8233===e}function w(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&c.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function I(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&c.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function L(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function A(e){return"eval"===e||"arguments"===e}function P(e,t,n,r,a){var i;v("number"==typeof n,"Comment must have valid position"),S.lastCommentStart>=n||(S.lastCommentStart=n,i={type:e,value:t},g.range&&(i.range=[n,r]),g.loc&&(i.loc=a),g.comments.push(i),g.attachComment&&(g.leadingComments.push(i),g.trailingComments.push(i)))}function N(e){var t,n,r,a;for(t=m-e,n={start:{line:p,column:m-d-e}};m<f;)if(r=s.charCodeAt(m),++m,C(r))return g.comments&&(a=s.slice(t+e,m-1),n.end={line:p,column:m-d-1},P("Line",a,t,m-1,n)),13===r&&10===s.charCodeAt(m)&&++m,++p,void(d=m);g.comments&&(a=s.slice(t+e,m),n.end={line:p,column:m-d},P("Line",a,t,m,n))}function O(){var e,t,n,r;for(g.comments&&(e=m-2,t={start:{line:p,column:m-d-2}});m<f;)if(C(n=s.charCodeAt(m)))13===n&&10===s.charCodeAt(m+1)&&++m,++p,d=++m,m>=f&&$({},o.UnexpectedToken,"ILLEGAL");else if(42===n){if(47===s.charCodeAt(m+1))return++m,++m,void(g.comments&&(r=s.slice(e+2,m-2),t.end={line:p,column:m-d},P("Block",r,e,m,t)));++m}else++m;$({},o.UnexpectedToken,"ILLEGAL")}function U(){var e,t;for(t=0===m;m<f;)if(x(e=s.charCodeAt(m)))++m;else if(C(e))++m,13===e&&10===s.charCodeAt(m)&&++m,++p,d=m,t=!0;else if(47===e)if(47===(e=s.charCodeAt(m+1)))++m,++m,N(2),t=!0;else{if(42!==e)break;++m,++m,O()}else if(t&&45===e){if(45!==s.charCodeAt(m+1)||62!==s.charCodeAt(m+2))break;m+=3,N(3)}else{if(60!==e)break;if("!--"!==s.slice(m+1,m+4))break;++m,++m,++m,++m,N(4)}}function R(e){var t,n,r,a=0;for(n="u"===e?4:2,t=0;t<n;++t){if(!(m<f&&b(s[m])))return"";r=s[m++],a=16*a+"0123456789abcdef".indexOf(r.toLowerCase())}return String.fromCharCode(a)}function F(){var e,t;for(e=s.charCodeAt(m++),t=String.fromCharCode(e),92===e&&(117!==s.charCodeAt(m)&&$({},o.UnexpectedToken,"ILLEGAL"),++m,(e=R("u"))&&"\\"!==e&&w(e.charCodeAt(0))||$({},o.UnexpectedToken,"ILLEGAL"),t=e);m<f&&I(e=s.charCodeAt(m));)++m,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==s.charCodeAt(m)&&$({},o.UnexpectedToken,"ILLEGAL"),++m,(e=R("u"))&&"\\"!==e&&I(e.charCodeAt(0))||$({},o.UnexpectedToken,"ILLEGAL"),t+=e);return t}function T(){var e,n;return e=m,{type:1===(n=92===s.charCodeAt(m)?F():function(){var e,t;for(e=m++;m<f;){if(92===(t=s.charCodeAt(m)))return m=e,F();if(!I(t))break;++m}return s.slice(e,m)}()).length?t.Identifier:function(e){if(u&&L(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}(n)?t.Keyword:"null"===n?t.NullLiteral:"true"===n||"false"===n?t.BooleanLiteral:t.Identifier,value:n,lineNumber:p,lineStart:d,start:e,end:m}}function D(){var e,n,r,a,i=m,c=s.charCodeAt(m),l=s[m];switch(c){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++m,g.tokenize&&(40===c?g.openParenToken=g.tokens.length:123===c&&(g.openCurlyToken=g.tokens.length)),{type:t.Punctuator,value:String.fromCharCode(c),lineNumber:p,lineStart:d,start:i,end:m};default:if(61===(e=s.charCodeAt(m+1)))switch(c){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return m+=2,{type:t.Punctuator,value:String.fromCharCode(c)+String.fromCharCode(e),lineNumber:p,lineStart:d,start:i,end:m};case 33:case 61:return m+=2,61===s.charCodeAt(m)&&++m,{type:t.Punctuator,value:s.slice(i,m),lineNumber:p,lineStart:d,start:i,end:m}}}return">>>="===(a=s.substr(m,4))?(m+=4,{type:t.Punctuator,value:a,lineNumber:p,lineStart:d,start:i,end:m}):">>>"===(r=a.substr(0,3))||"<<="===r||">>="===r?(m+=3,{type:t.Punctuator,value:r,lineNumber:p,lineStart:d,start:i,end:m}):l===(n=r.substr(0,2))[1]&&"+-<>&|".indexOf(l)>=0||"=>"===n?(m+=2,{type:t.Punctuator,value:n,lineNumber:p,lineStart:d,start:i,end:m}):"<>=!+-*%&|^/".indexOf(l)>=0?(++m,{type:t.Punctuator,value:l,lineNumber:p,lineStart:d,start:i,end:m}):void $({},o.UnexpectedToken,"ILLEGAL")}function B(){var e,n,r;if(v(k((r=s[m]).charCodeAt(0))||"."===r,"Numeric literal must start with a decimal digit or a decimal point"),n=m,e="","."!==r){if(e=s[m++],r=s[m],"0"===e){if("x"===r||"X"===r)return++m,function(e){for(var n="";m<f&&b(s[m]);)n+=s[m++];return 0===n.length&&$({},o.UnexpectedToken,"ILLEGAL"),w(s.charCodeAt(m))&&$({},o.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseInt("0x"+n,16),lineNumber:p,lineStart:d,start:e,end:m}}(n);if(E(r)&&function(){var e,t;for(e=m+1;e<f;++e){if("8"===(t=s[e])||"9"===t)return!1;if(!E(t))return!0}return!0}())return function(e){for(var n="0"+s[m++];m<f&&E(s[m]);)n+=s[m++];return(w(s.charCodeAt(m))||k(s.charCodeAt(m)))&&$({},o.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseInt(n,8),octal:!0,lineNumber:p,lineStart:d,start:e,end:m}}(n)}for(;k(s.charCodeAt(m));)e+=s[m++];r=s[m]}if("."===r){for(e+=s[m++];k(s.charCodeAt(m));)e+=s[m++];r=s[m]}if("e"===r||"E"===r)if(e+=s[m++],"+"!==(r=s[m])&&"-"!==r||(e+=s[m++]),k(s.charCodeAt(m)))for(;k(s.charCodeAt(m));)e+=s[m++];else $({},o.UnexpectedToken,"ILLEGAL");return w(s.charCodeAt(m))&&$({},o.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseFloat(e),lineNumber:p,lineStart:d,start:n,end:m}}function W(){var e,n,r,a;return y=null,U(),e=m,n=function(){var e,t,n,r;for(v("/"===(e=s[m]),"Regular expression literal must start with a slash"),t=s[m++],n=!1,r=!1;m<f;)if(t+=e=s[m++],"\\"===e)C((e=s[m++]).charCodeAt(0))&&$({},o.UnterminatedRegExp),t+=e;else if(C(e.charCodeAt(0)))$({},o.UnterminatedRegExp);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||$({},o.UnterminatedRegExp),{value:t.substr(1,t.length-2),literal:t}}(),r=function(){var e,t,n,r;for(t="",n="";m<f&&I((e=s[m]).charCodeAt(0));)if(++m,"\\"===e&&m<f)if("u"===(e=s[m])){if(r=++m,e=R("u"))for(n+=e,t+="\\u";r<m;++r)t+=s[r];else m=r,n+="u",t+="\\u";X({},o.UnexpectedToken,"ILLEGAL")}else t+="\\",X({},o.UnexpectedToken,"ILLEGAL");else n+=e,t+=e;return{value:n,literal:t}}(),a=function(e,t){var n;try{n=new RegExp(e,t)}catch(r){$({},o.InvalidRegExp)}return n}(n.value,r.value),g.tokenize?{type:t.RegularExpression,value:a,lineNumber:p,lineStart:d,start:e,end:m}:{literal:n.literal+r.literal,value:a,start:e,end:m}}function j(){var e,t,n,r;return U(),e=m,t={start:{line:p,column:m-d}},n=W(),t.end={line:p,column:m-d},g.tokenize||(g.tokens.length>0&&(r=g.tokens[g.tokens.length-1]).range[0]===e&&"Punctuator"===r.type&&("/"!==r.value&&"/="!==r.value||g.tokens.pop()),g.tokens.push({type:"RegularExpression",value:n.literal,range:[e,m],loc:t})),n}function G(){var e;return U(),m>=f?{type:t.EOF,lineNumber:p,lineStart:d,start:m,end:m}:w(e=s.charCodeAt(m))?T():40===e||41===e||59===e?D():39===e||34===e?function(){var e,n,r,a,i,c,l,u,h="",y=!1;for(l=p,u=d,v("'"===(e=s[m])||'"'===e,"String literal must starts with a quote"),n=m,++m;m<f;){if((r=s[m++])===e){e="";break}if("\\"===r)if((r=s[m++])&&C(r.charCodeAt(0)))++p,"\r"===r&&"\n"===s[m]&&++m,d=m;else switch(r){case"u":case"x":c=m,(i=R(r))?h+=i:(m=c,h+=r);break;case"n":h+="\n";break;case"r":h+="\r";break;case"t":h+="\t";break;case"b":h+="\b";break;case"f":h+="\f";break;case"v":h+="\v";break;default:E(r)?(0!==(a="01234567".indexOf(r))&&(y=!0),m<f&&E(s[m])&&(y=!0,a=8*a+"01234567".indexOf(s[m++]),"0123".indexOf(r)>=0&&m<f&&E(s[m])&&(a=8*a+"01234567".indexOf(s[m++]))),h+=String.fromCharCode(a)):h+=r}else{if(C(r.charCodeAt(0)))break;h+=r}}return""!==e&&$({},o.UnexpectedToken,"ILLEGAL"),{type:t.StringLiteral,value:h,octal:y,startLineNumber:l,startLineStart:u,lineNumber:p,lineStart:d,start:n,end:m}}():46===e?k(s.charCodeAt(m+1))?B():D():k(e)?B():g.tokenize&&47===e?function(){var e,t;if(!(e=g.tokens[g.tokens.length-1]))return j();if("Punctuator"===e.type){if("]"===e.value)return D();if(")"===e.value)return!(t=g.tokens[g.openParenToken-1])||"Keyword"!==t.type||"if"!==t.value&&"while"!==t.value&&"for"!==t.value&&"with"!==t.value?D():j();if("}"===e.value){if(g.tokens[g.openCurlyToken-3]&&"Keyword"===g.tokens[g.openCurlyToken-3].type){if(!(t=g.tokens[g.openCurlyToken-4]))return D()}else{if(!g.tokens[g.openCurlyToken-4]||"Keyword"!==g.tokens[g.openCurlyToken-4].type)return D();if(!(t=g.tokens[g.openCurlyToken-5]))return j()}return r.indexOf(t.value)>=0?D():j()}return j()}return"Keyword"===e.type&&"this"!==e.value?j():D()}():D()}function K(){var e,r,a;return U(),e={start:{line:p,column:m-d}},r=G(),e.end={line:p,column:m-d},r.type!==t.EOF&&(a=s.slice(r.start,r.end),g.tokens.push({type:n[r.type],value:a,range:[r.start,r.end],loc:e})),r}function V(){var e;return m=(e=y).end,p=e.lineNumber,d=e.lineStart,y=void 0!==g.tokens?K():G(),m=e.end,p=e.lineNumber,d=e.lineStart,e}function M(){var e,t,n;e=m,t=p,n=d,y=void 0!==g.tokens?K():G(),m=e,p=t,d=n}function H(e,t){this.line=e,this.column=t}function q(e,t,n,r){this.start=new H(e,t),this.end=new H(n,r)}function z(){var e,t,n,r;return e=m,t=p,n=d,U(),r=p!==t,m=e,p=t,d=n,r}function $(e,t){var n,r=Array.prototype.slice.call(arguments,2),a=t.replace(/%(\d)/g,function(e,t){return v(t<r.length,"Message reference must be in range"),r[t]});throw"number"==typeof e.lineNumber?((n=new Error("Line "+e.lineNumber+": "+a)).index=e.start,n.lineNumber=e.lineNumber,n.column=e.start-d+1):((n=new Error("Line "+p+": "+a)).index=m,n.lineNumber=p,n.column=m-d+1),n.description=a,n}function X(){try{$.apply(null,arguments)}catch(e){if(!g.errors)throw e;g.errors.push(e)}}function J(e){if(e.type===t.EOF&&$(e,o.UnexpectedEOS),e.type===t.NumericLiteral&&$(e,o.UnexpectedNumber),e.type===t.StringLiteral&&$(e,o.UnexpectedString),e.type===t.Identifier&&$(e,o.UnexpectedIdentifier),e.type===t.Keyword){if(function(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}(e.value))$(e,o.UnexpectedReserved);else if(u&&L(e.value))return void X(e,o.StrictReservedWord);$(e,o.UnexpectedToken,e.value)}$(e,o.UnexpectedToken,e.value)}function Q(e){var n=V();n.type===t.Punctuator&&n.value===e||J(n)}function Y(e){var n=V();n.type===t.Keyword&&n.value===e||J(n)}function Z(e){return y.type===t.Punctuator&&y.value===e}function _(e){return y.type===t.Keyword&&y.value===e}function ee(){var e,n=m,r=p,a=d,i=y;if(59===s.charCodeAt(m)||Z(";"))V();else{if(e=p,U(),p!==e)return m=n,p=r,d=a,void(y=i);y.type===t.EOF||Z("}")||J(y)}}function te(e){return e.type===a.Identifier||e.type===a.MemberExpression}function ne(e,t){var n,r,a;return n=u,a=y,r=we(),t&&u&&A(e[0].name)&&X(t,o.StrictParamName),u=n,h.markEnd(h.createFunctionExpression(null,e,[],r),a)}function re(){var e,n;return n=y,(e=V()).type===t.StringLiteral||e.type===t.NumericLiteral?(u&&e.octal&&X(e,o.StrictOctalLiteral),h.markEnd(h.createLiteral(e),n)):h.markEnd(h.createIdentifier(e.value),n)}function ae(){var e,n,r,a,i,c;return c=y,(e=y).type===t.Identifier?(r=re(),"get"!==e.value||Z(":")?"set"!==e.value||Z(":")?(Q(":"),a=he(),h.markEnd(h.createProperty("init",r,a),c)):(n=re(),Q("("),(e=y).type!==t.Identifier?(Q(")"),X(e,o.UnexpectedToken,e.value),a=ne([])):(i=[ge()],Q(")"),a=ne(i,e)),h.markEnd(h.createProperty("set",n,a),c)):(n=re(),Q("("),Q(")"),a=ne([]),h.markEnd(h.createProperty("get",n,a),c))):e.type!==t.EOF&&e.type!==t.Punctuator?(n=re(),Q(":"),a=he(),h.markEnd(h.createProperty("init",n,a),c)):void J(e)}function ie(){var e,n,r,c;if(Z("("))return function(){var e;return Q("("),e=ye(),Q(")"),e}();if(Z("["))return function(){var e,t=[];for(e=y,Q("[");!Z("]");)Z(",")?(V(),t.push(null)):(t.push(he()),Z("]")||Q(","));return V(),h.markEnd(h.createArrayExpression(t),e)}();if(Z("{"))return function(){var e,t,n,r,c,l=[],s={},m=String;for(c=y,Q("{");!Z("}");)t=(e=ae()).key.type===a.Identifier?e.key.name:m(e.key.value),r="init"===e.kind?i.Data:"get"===e.kind?i.Get:i.Set,n="$"+t,Object.prototype.hasOwnProperty.call(s,n)?(s[n]===i.Data?u&&r===i.Data?X({},o.StrictDuplicateProperty):r!==i.Data&&X({},o.AccessorDataProperty):r===i.Data?X({},o.AccessorDataProperty):s[n]&r&&X({},o.AccessorGetSet),s[n]|=r):s[n]=r,l.push(e),Z("}")||Q(",");return Q("}"),h.markEnd(h.createObjectExpression(l),c)}();if(e=y.type,c=y,e===t.Identifier)r=h.createIdentifier(V().value);else if(e===t.StringLiteral||e===t.NumericLiteral)u&&y.octal&&X(y,o.StrictOctalLiteral),r=h.createLiteral(V());else if(e===t.Keyword){if(_("function"))return function(){var e,t,n,r,a,i,c,l,s=null,m=[];l=y,Y("function"),Z("(")||(e=y,s=ge(),u?A(e.value)&&X(e,o.StrictFunctionName):A(e.value)?(n=e,r=o.StrictFunctionName):L(e.value)&&(n=e,r=o.StrictReservedWord));a=Ie(n),m=a.params,t=a.stricted,n=a.firstRestricted,a.message&&(r=a.message);c=u,i=we(),u&&n&&$(n,r);u&&t&&X(t,r);return u=c,h.markEnd(h.createFunctionExpression(s,m,[],i),l)}();_("this")?(V(),r=h.createThisExpression()):J(V())}else e===t.BooleanLiteral?((n=V()).value="true"===n.value,r=h.createLiteral(n)):e===t.NullLiteral?((n=V()).value=null,r=h.createLiteral(n)):Z("/")||Z("/=")?(r=void 0!==g.tokens?h.createLiteral(j()):h.createLiteral(W()),M()):J(V());return h.markEnd(r,c)}function oe(){var e=[];if(Q("("),!Z(")"))for(;m<f&&(e.push(he()),!Z(")"));)Q(",");return Q(")"),e}function ce(){var e,n;return n=y,function(e){return e.type===t.Identifier||e.type===t.Keyword||e.type===t.BooleanLiteral||e.type===t.NullLiteral}(e=V())||J(e),h.markEnd(h.createIdentifier(e.value),n)}function le(){return Q("."),ce()}function se(){var e;return Q("["),e=ye(),Q("]"),e}function ue(){var e,t,n;return n=y,Y("new"),e=function(){var e,t,n;v(S.allowIn,"callee of new expression always allow in keyword."),n=y,e=_("new")?ue():ie();for(;Z(".")||Z("[");)Z("[")?(t=se(),e=h.createMemberExpression("[",e,t)):(t=le(),e=h.createMemberExpression(".",e,t)),h.markEnd(e,n);return e}(),t=Z("(")?oe():[],h.markEnd(h.createNewExpression(e,t),n)}function me(){var e,n,r=y;return e=function(){var e,t,n,r,a=S.allowIn;for(r=y,S.allowIn=!0,e=_("new")?ue():ie();;){if(Z("."))n=le(),e=h.createMemberExpression(".",e,n);else if(Z("("))t=oe(),e=h.createCallExpression(e,t);else{if(!Z("["))break;n=se(),e=h.createMemberExpression("[",e,n)}h.markEnd(e,r)}return S.allowIn=a,e}(),y.type===t.Punctuator&&(!Z("++")&&!Z("--")||z()||(u&&e.type===a.Identifier&&A(e.name)&&X({},o.StrictLHSPostfix),te(e)||X({},o.InvalidLHSInAssignment),n=V(),e=h.markEnd(h.createPostfixExpression(n.value,e),r))),e}function pe(){var e,n,r;return y.type!==t.Punctuator&&y.type!==t.Keyword?n=me():Z("++")||Z("--")?(r=y,e=V(),n=pe(),u&&n.type===a.Identifier&&A(n.name)&&X({},o.StrictLHSPrefix),te(n)||X({},o.InvalidLHSInAssignment),n=h.createUnaryExpression(e.value,n),n=h.markEnd(n,r)):Z("+")||Z("-")||Z("~")||Z("!")?(r=y,e=V(),n=pe(),n=h.createUnaryExpression(e.value,n),n=h.markEnd(n,r)):_("delete")||_("void")||_("typeof")?(r=y,e=V(),n=pe(),n=h.createUnaryExpression(e.value,n),n=h.markEnd(n,r),u&&"delete"===n.operator&&n.argument.type===a.Identifier&&X({},o.StrictDelete)):n=me(),n}function de(e,n){var r=0;if(e.type!==t.Punctuator&&e.type!==t.Keyword)return 0;switch(e.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":r=7;break;case"in":r=n?7:0;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11}return r}function fe(){var e,t,n,r,a;return a=y,e=function(){var e,t,n,r,a,i,o,c,l,s;if(e=y,l=pe(),0===(a=de(r=y,S.allowIn)))return l;for(r.prec=a,V(),t=[e,y],i=[l,r,o=pe()];(a=de(y,S.allowIn))>0;){for(;i.length>2&&a<=i[i.length-2].prec;)o=i.pop(),c=i.pop().value,l=i.pop(),n=h.createBinaryExpression(c,l,o),t.pop(),e=t[t.length-1],h.markEnd(n,e),i.push(n);(r=V()).prec=a,i.push(r),t.push(y),n=pe(),i.push(n)}for(n=i[s=i.length-1],t.pop();s>1;)n=h.createBinaryExpression(i[s-1].value,i[s-2],n),s-=2,e=t.pop(),h.markEnd(n,e);return n}(),Z("?")&&(V(),t=S.allowIn,S.allowIn=!0,n=he(),S.allowIn=t,Q(":"),r=he(),e=h.createConditionalExpression(e,n,r),h.markEnd(e,a)),e}function he(){var e,n,r,i,c,l;return e=y,c=y,i=n=fe(),y.type!==t.Punctuator||"="!==(l=y.value)&&"*="!==l&&"/="!==l&&"%="!==l&&"+="!==l&&"-="!==l&&"<<="!==l&&">>="!==l&&">>>="!==l&&"&="!==l&&"^="!==l&&"|="!==l||(te(n)||X({},o.InvalidLHSInAssignment),u&&n.type===a.Identifier&&A(n.name)&&X(e,o.StrictLHSAssignment),e=V(),r=he(),i=h.markEnd(h.createAssignmentExpression(e.value,n,r),c)),i}function ye(){var e,t=y;if(e=he(),Z(",")){for(e=h.createSequenceExpression([e]);m<f&&Z(",");)V(),e.expressions.push(he());h.markEnd(e,t)}return e}function Se(){var e,t;return t=y,Q("{"),e=function(){for(var e,t=[];m<f&&!Z("}")&&void 0!==(e=Ae());)t.push(e);return t}(),Q("}"),h.markEnd(h.createBlockStatement(e),t)}function ge(){var e,n;return n=y,(e=V()).type!==t.Identifier&&J(e),h.markEnd(h.createIdentifier(e.value),n)}function ve(e){var t,n,r=null;return n=y,t=ge(),u&&A(t.name)&&X({},o.StrictVarName),"const"===e?(Q("="),r=he()):Z("=")&&(V(),r=he()),h.markEnd(h.createVariableDeclarator(t,r),n)}function ke(e){var t=[];do{if(t.push(ve(e)),!Z(","))break;V()}while(m<f);return t}function be(){var e,t,n,r,a,i,c,l,s,u,m=S.allowIn;return e=t=n=null,Y("for"),Q("("),Z(";")?V():(_("var")||_("let")?(S.allowIn=!1,u=y,l=V(),s=ke(),e=h.markEnd(h.createVariableDeclaration(s,l.value),u),S.allowIn=m,1===e.declarations.length&&_("in")&&(V(),r=e,a=ye(),e=null)):(S.allowIn=!1,e=ye(),S.allowIn=m,_("in")&&(te(e)||X({},o.InvalidLHSInForIn),V(),r=e,a=ye(),e=null)),void 0===r&&Q(";")),void 0===r&&(Z(";")||(t=ye()),Q(";"),Z(")")||(n=ye())),Q(")"),c=S.inIteration,S.inIteration=!0,i=Ce(),S.inIteration=c,void 0===r?h.createForStatement(e,t,n,i):h.createForInStatement(r,a,i)}function Ee(){var e,t,n,r=[];for(n=y,_("default")?(V(),e=null):(Y("case"),e=ye()),Q(":");m<f&&!(Z("}")||_("default")||_("case"));)t=Ce(),r.push(t);return h.markEnd(h.createSwitchCase(e,r),n)}function xe(){var e,t,n,r,a=[],i=null;return Y("try"),e=Se(),_("catch")&&a.push((r=y,Y("catch"),Q("("),Z(")")&&J(y),t=ge(),u&&A(t.name)&&X({},o.StrictCatchVariable),Q(")"),n=Se(),h.markEnd(h.createCatchClause(t,n),r))),_("finally")&&(V(),i=Se()),0!==a.length||i||$({},o.NoCatchOrFinally),h.createTryStatement(e,[],a,i)}function Ce(){var e,n,r,i,c,l,p,d,g,v=y.type;if(v===t.EOF&&J(y),v===t.Punctuator&&"{"===y.value)return Se();if(i=y,v===t.Punctuator)switch(y.value){case";":return h.markEnd((Q(";"),h.createEmptyStatement()),i);case"(":return h.markEnd(function(){var e=ye();return ee(),h.createExpressionStatement(e)}(),i)}if(v===t.Keyword)switch(y.value){case"break":return h.markEnd(function(){var e,n=null;return Y("break"),59===s.charCodeAt(m)?(V(),S.inIteration||S.inSwitch||$({},o.IllegalBreak),h.createBreakStatement(null)):z()?(S.inIteration||S.inSwitch||$({},o.IllegalBreak),h.createBreakStatement(null)):(y.type===t.Identifier&&(e="$"+(n=ge()).name,Object.prototype.hasOwnProperty.call(S.labelSet,e)||$({},o.UnknownLabel,n.name)),ee(),null!==n||S.inIteration||S.inSwitch||$({},o.IllegalBreak),h.createBreakStatement(n))}(),i);case"continue":return h.markEnd(function(){var e,n=null;return Y("continue"),59===s.charCodeAt(m)?(V(),S.inIteration||$({},o.IllegalContinue),h.createContinueStatement(null)):z()?(S.inIteration||$({},o.IllegalContinue),h.createContinueStatement(null)):(y.type===t.Identifier&&(e="$"+(n=ge()).name,Object.prototype.hasOwnProperty.call(S.labelSet,e)||$({},o.UnknownLabel,n.name)),ee(),null!==n||S.inIteration||$({},o.IllegalContinue),h.createContinueStatement(n))}(),i);case"debugger":return h.markEnd((Y("debugger"),ee(),h.createDebuggerStatement()),i);case"do":return h.markEnd((Y("do"),g=S.inIteration,S.inIteration=!0,p=Ce(),S.inIteration=g,Y("while"),Q("("),d=ye(),Q(")"),Z(";")&&V(),h.createDoWhileStatement(p,d)),i);case"for":return h.markEnd(be(),i);case"function":return h.markEnd(Le(),i);case"if":return h.markEnd(function(){var e,t,n;return Y("if"),Q("("),e=ye(),Q(")"),t=Ce(),_("else")?(V(),n=Ce()):n=null,h.createIfStatement(e,t,n)}(),i);case"return":return h.markEnd((l=null,Y("return"),S.inFunctionBody||X({},o.IllegalReturn),32===s.charCodeAt(m)&&w(s.charCodeAt(m+1))?(l=ye(),ee(),h.createReturnStatement(l)):z()?h.createReturnStatement(null):(Z(";")||Z("}")||y.type===t.EOF||(l=ye()),ee(),h.createReturnStatement(l))),i);case"switch":return h.markEnd(function(){var e,t,n,r,a;if(Y("switch"),Q("("),e=ye(),Q(")"),Q("{"),t=[],Z("}"))return V(),h.createSwitchStatement(e,t);for(r=S.inSwitch,S.inSwitch=!0,a=!1;m<f&&!Z("}");)null===(n=Ee()).test&&(a&&$({},o.MultipleDefaultsInSwitch),a=!0),t.push(n);return S.inSwitch=r,Q("}"),h.createSwitchStatement(e,t)}(),i);case"throw":return h.markEnd(function(){var e;return Y("throw"),z()&&$({},o.NewlineAfterThrow),e=ye(),ee(),h.createThrowStatement(e)}(),i);case"try":return h.markEnd(xe(),i);case"var":return h.markEnd((Y("var"),c=ke(),ee(),h.createVariableDeclaration(c,"var")),i);case"while":return h.markEnd(function(){var e,t,n;return Y("while"),Q("("),e=ye(),Q(")"),n=S.inIteration,S.inIteration=!0,t=Ce(),S.inIteration=n,h.createWhileStatement(e,t)}(),i);case"with":return h.markEnd(function(){var e,t;return u&&(U(),X({},o.StrictModeWith)),Y("with"),Q("("),e=ye(),Q(")"),t=Ce(),h.createWithStatement(e,t)}(),i)}return(e=ye()).type===a.Identifier&&Z(":")?(V(),r="$"+e.name,Object.prototype.hasOwnProperty.call(S.labelSet,r)&&$({},o.Redeclaration,"Label",e.name),S.labelSet[r]=!0,n=Ce(),delete S.labelSet[r],h.markEnd(h.createLabeledStatement(e,n),i)):(ee(),h.markEnd(h.createExpressionStatement(e),i))}function we(){var e,n,r,i,c,l,p,d,g=[];for(d=y,Q("{");m<f&&y.type===t.StringLiteral&&(n=y,e=Ae(),g.push(e),e.expression.type===a.Literal);)"use strict"===s.slice(n.start+1,n.end-1)?(u=!0,r&&X(r,o.StrictOctalLiteral)):!r&&n.octal&&(r=n);for(i=S.labelSet,c=S.inIteration,l=S.inSwitch,p=S.inFunctionBody,S.labelSet={},S.inIteration=!1,S.inSwitch=!1,S.inFunctionBody=!0;m<f&&!Z("}")&&void 0!==(e=Ae());)g.push(e);return Q("}"),S.labelSet=i,S.inIteration=c,S.inSwitch=l,S.inFunctionBody=p,h.markEnd(h.createBlockStatement(g),d)}function Ie(e){var t,n,r,a,i,c,l=[];if(Q("("),!Z(")"))for(a={};m<f&&(n=y,t=ge(),i="$"+n.value,u?(A(n.value)&&(r=n,c=o.StrictParamName),Object.prototype.hasOwnProperty.call(a,i)&&(r=n,c=o.StrictParamDupe)):e||(A(n.value)?(e=n,c=o.StrictParamName):L(n.value)?(e=n,c=o.StrictReservedWord):Object.prototype.hasOwnProperty.call(a,i)&&(e=n,c=o.StrictParamDupe)),l.push(t),a[i]=!0,!Z(")"));)Q(",");return Q(")"),{params:l,stricted:r,firstRestricted:e,message:c}}function Le(){var e,t,n,r,a,i,c,l,s,m;return m=y,Y("function"),r=y,e=ge(),u?A(r.value)&&X(r,o.StrictFunctionName):A(r.value)?(c=r,l=o.StrictFunctionName):L(r.value)&&(c=r,l=o.StrictReservedWord),t=(i=Ie(c)).params,a=i.stricted,c=i.firstRestricted,i.message&&(l=i.message),s=u,n=we(),u&&c&&$(c,l),u&&a&&X(a,l),u=s,h.markEnd(h.createFunctionDeclaration(e,t,[],n),m)}function Ae(){if(y.type===t.Keyword)switch(y.value){case"const":case"let":return e=y.value,r=y,Y(e),n=ke(e),ee(),h.markEnd(h.createVariableDeclaration(n,e),r);case"function":return Le();default:return Ce()}var e,n,r;if(y.type!==t.EOF)return Ce()}function Pe(){var e,n;return U(),M(),n=y,u=!1,e=function(){for(var e,n,r,i=[];m<f&&(n=y).type===t.StringLiteral&&(e=Ae(),i.push(e),e.expression.type===a.Literal);)"use strict"===s.slice(n.start+1,n.end-1)?(u=!0,r&&X(r,o.StrictOctalLiteral)):!r&&n.octal&&(r=n);for(;m<f&&void 0!==(e=Ae());)i.push(e);return i}(),h.markEnd(h.createProgram(e),n)}function Ne(){var e,t,n,r=[];for(e=0;e<g.tokens.length;++e)n={type:(t=g.tokens[e]).type,value:t.value},g.range&&(n.range=t.range),g.loc&&(n.loc=t.loc),r.push(n);g.tokens=r}(n={})[(t={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9}).BooleanLiteral]="Boolean",n[t.EOF]="<end>",n[t.Identifier]="Identifier",n[t.Keyword]="Keyword",n[t.NullLiteral]="Null",n[t.NumericLiteral]="Numeric",n[t.Punctuator]="Punctuator",n[t.StringLiteral]="String",n[t.RegularExpression]="RegularExpression",r=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],a={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},i={Data:1,Get:2,Set:4},o={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},c={NonAsciiIdentifierStart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),NonAsciiIdentifierPart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]")},l={name:"SyntaxTree",processComment:function(e){var t,n;if(!(e.type===a.Program&&e.body.length>0)){for(g.trailingComments.length>0?g.trailingComments[0].range[0]>=e.range[1]?(n=g.trailingComments,g.trailingComments=[]):g.trailingComments.length=0:g.bottomRightStack.length>0&&g.bottomRightStack[g.bottomRightStack.length-1].trailingComments&&g.bottomRightStack[g.bottomRightStack.length-1].trailingComments[0].range[0]>=e.range[1]&&(n=g.bottomRightStack[g.bottomRightStack.length-1].trailingComments,delete g.bottomRightStack[g.bottomRightStack.length-1].trailingComments);g.bottomRightStack.length>0&&g.bottomRightStack[g.bottomRightStack.length-1].range[0]>=e.range[0];)t=g.bottomRightStack.pop();t?t.leadingComments&&t.leadingComments[t.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=t.leadingComments,delete t.leadingComments):g.leadingComments.length>0&&g.leadingComments[g.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=g.leadingComments,g.leadingComments=[]),n&&(e.trailingComments=n),g.bottomRightStack.push(e)}},markEnd:function(e,t){return g.range&&(e.range=[t.start,m]),g.loc&&(e.loc=new q(void 0===t.startLineNumber?t.lineNumber:t.startLineNumber,t.start-(void 0===t.startLineStart?t.lineStart:t.startLineStart),p,m-d),this.postProcess(e)),g.attachComment&&this.processComment(e),e},postProcess:function(e){return g.source&&(e.loc.source=g.source),e},createArrayExpression:function(e){return{type:a.ArrayExpression,elements:e}},createAssignmentExpression:function(e,t,n){return{type:a.AssignmentExpression,operator:e,left:t,right:n}},createBinaryExpression:function(e,t,n){return{type:"||"===e||"&&"===e?a.LogicalExpression:a.BinaryExpression,operator:e,left:t,right:n}},createBlockStatement:function(e){return{type:a.BlockStatement,body:e}},createBreakStatement:function(e){return{type:a.BreakStatement,label:e}},createCallExpression:function(e,t){return{type:a.CallExpression,callee:e,arguments:t}},createCatchClause:function(e,t){return{type:a.CatchClause,param:e,body:t}},createConditionalExpression:function(e,t,n){return{type:a.ConditionalExpression,test:e,consequent:t,alternate:n}},createContinueStatement:function(e){return{type:a.ContinueStatement,label:e}},createDebuggerStatement:function(){return{type:a.DebuggerStatement}},createDoWhileStatement:function(e,t){return{type:a.DoWhileStatement,body:e,test:t}},createEmptyStatement:function(){return{type:a.EmptyStatement}},createExpressionStatement:function(e){return{type:a.ExpressionStatement,expression:e}},createForStatement:function(e,t,n,r){return{type:a.ForStatement,init:e,test:t,update:n,body:r}},createForInStatement:function(e,t,n){return{type:a.ForInStatement,left:e,right:t,body:n,each:!1}},createFunctionDeclaration:function(e,t,n,r){return{type:a.FunctionDeclaration,id:e,params:t,defaults:n,body:r,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(e,t,n,r){return{type:a.FunctionExpression,id:e,params:t,defaults:n,body:r,rest:null,generator:!1,expression:!1}},createIdentifier:function(e){return{type:a.Identifier,name:e}},createIfStatement:function(e,t,n){return{type:a.IfStatement,test:e,consequent:t,alternate:n}},createLabeledStatement:function(e,t){return{type:a.LabeledStatement,label:e,body:t}},createLiteral:function(e){return{type:a.Literal,value:e.value,raw:s.slice(e.start,e.end)}},createMemberExpression:function(e,t,n){return{type:a.MemberExpression,computed:"["===e,object:t,property:n}},createNewExpression:function(e,t){return{type:a.NewExpression,callee:e,arguments:t}},createObjectExpression:function(e){return{type:a.ObjectExpression,properties:e}},createPostfixExpression:function(e,t){return{type:a.UpdateExpression,operator:e,argument:t,prefix:!1}},createProgram:function(e){return{type:a.Program,body:e}},createProperty:function(e,t,n){return{type:a.Property,key:t,value:n,kind:e}},createReturnStatement:function(e){return{type:a.ReturnStatement,argument:e}},createSequenceExpression:function(e){return{type:a.SequenceExpression,expressions:e}},createSwitchCase:function(e,t){return{type:a.SwitchCase,test:e,consequent:t}},createSwitchStatement:function(e,t){return{type:a.SwitchStatement,discriminant:e,cases:t}},createThisExpression:function(){return{type:a.ThisExpression}},createThrowStatement:function(e){return{type:a.ThrowStatement,argument:e}},createTryStatement:function(e,t,n,r){return{type:a.TryStatement,block:e,guardedHandlers:t,handlers:n,finalizer:r}},createUnaryExpression:function(e,t){return"++"===e||"--"===e?{type:a.UpdateExpression,operator:e,argument:t,prefix:!0}:{type:a.UnaryExpression,operator:e,argument:t,prefix:!0}},createVariableDeclaration:function(e,t){return{type:a.VariableDeclaration,declarations:e,kind:t}},createVariableDeclarator:function(e,t){return{type:a.VariableDeclarator,id:e,init:t}},createWhileStatement:function(e,t){return{type:a.WhileStatement,test:e,body:t}},createWithStatement:function(e,t){return{type:a.WithStatement,object:e,body:t}}},e.version="1.2.5",e.tokenize=function(e,n){var r,a;r=String,"string"==typeof e||e instanceof String||(e=r(e)),h=l,m=0,p=(s=e).length>0?1:0,d=0,f=s.length,y=null,S={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},g={},(n=n||{}).tokens=!0,g.tokens=[],g.tokenize=!0,g.openParenToken=-1,g.openCurlyToken=-1,g.range="boolean"==typeof n.range&&n.range,g.loc="boolean"==typeof n.loc&&n.loc,"boolean"==typeof n.comment&&n.comment&&(g.comments=[]),"boolean"==typeof n.tolerant&&n.tolerant&&(g.errors=[]);try{if(M(),y.type===t.EOF)return g.tokens;for(V();y.type!==t.EOF;)try{V()}catch(i){if(g.errors){g.errors.push(i);break}throw i}Ne(),a=g.tokens,void 0!==g.comments&&(a.comments=g.comments),void 0!==g.errors&&(a.errors=g.errors)}catch(o){throw o}finally{g={}}return a},e.parse=function(e,t){var n,r;r=String,"string"==typeof e||e instanceof String||(e=r(e)),h=l,m=0,p=(s=e).length>0?1:0,d=0,f=s.length,y=null,S={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},g={},void 0!==t&&(g.range="boolean"==typeof t.range&&t.range,g.loc="boolean"==typeof t.loc&&t.loc,g.attachComment="boolean"==typeof t.attachComment&&t.attachComment,g.loc&&null!==t.source&&void 0!==t.source&&(g.source=r(t.source)),"boolean"==typeof t.tokens&&t.tokens&&(g.tokens=[]),"boolean"==typeof t.comment&&t.comment&&(g.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(g.errors=[]),g.attachComment&&(g.range=!0,g.comments=[],g.bottomRightStack=[],g.trailingComments=[],g.leadingComments=[]));try{n=Pe(),void 0!==g.comments&&(n.comments=g.comments),void 0!==g.tokens&&(Ne(),n.tokens=g.tokens),void 0!==g.errors&&(n.errors=g.errors)}catch(a){throw a}finally{g={}}return n},e.Syntax=function(){var e,t={};for(e in"function"==typeof Object.create&&(t=Object.create(null)),a)a.hasOwnProperty(e)&&(t[e]=a[e]);return"function"==typeof Object.freeze&&Object.freeze(t),t}()});
},{}],"FHLp":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3],r=require("esprima"),n=require("uniq"),t=0;function i(e,r,n){this.name=e,this.lvalue=r,this.rvalue=n,this.count=0}function a(e,r,n,t){this.body=e,this.args=r,this.thisVars=n,this.localVars=t}function o(r){if("eval"===r)throw new Error("cwise-parser: eval() not allowed");return"undefined"!=typeof window?r in window:void 0!==e?r in e:"undefined"!=typeof self&&r in self}function s(e){for(var r=e.body[0].expression.callee.params,n=new Array(r.length),t=0;t<r.length;++t)n[t]=r[t].name;return n}function p(e){for(var p=["(",e,")()"].join(""),l=r.parse(p,{range:!0}),f="_inline_"+t+++"_",u=s(l),c=new Array(u.length),h=0;h<u.length;++h)c[h]=new i([f,"arg",h,"_"].join(""),!1,!1);for(var y=new Array(p.length),g=(h=0,p.length);h<g;++h)y[h]=p.charAt(h);var v=[],d=[];function w(e,r){for(var n=e.range[0],t=e.range[1],i=n+1;i<t;++i)y[i]="";y[n]=r}var m,_=1,b=2;return function e(r,n){if(r.parent=n,"MemberExpression"===r.type)r.computed?(e(r.object,r),e(r.property,r)):"ThisExpression"===r.object.type?w(r,(m=r.property.name,x="this_"+m.replace(/\_/g,"__"),d.push(x),x)):e(r.object,r);else{if("ThisExpression"===r.type)throw new Error("cwise-parser: Computed this is not allowed");if("Identifier"===r.type){var t=r.name,i=u.indexOf(t);if(i>=0){var a=c[i],s=function(e){return"AssignmentExpression"===e.parent.type&&e.parent.left===e?"="===e.parent.operator?_:_|b:"UpdateExpression"===e.parent.type?_|b:b}(r);s&_&&(a.lvalue=!0),s&b&&(a.rvalue=!0),++a.count,w(r,a.name)}else o(t)||w(r,function(e){var r=f+e.replace(/\_/g,"__");return v.push(r),r}(t))}else if("Literal"===r.type)"string"==typeof r.value&&w(r,"'"+r.value.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'");else{if("WithStatement"===r.type)throw new Error("cwise-parser: with() statements not allowed");for(var p=Object.keys(r),l=0,h=p.length;l<h;++l)if("parent"!==p[l]){var y=r[p[l]];if(y)if(y instanceof Array)for(var g=0;g<y.length;++g)y[g]&&"string"==typeof y[g].type&&e(y[g],r);else"string"==typeof y.type&&e(y,r)}}}var m,x}(l.body[0].expression.callee.body,void 0),n(v),n(d),new a((m=l.body[0].expression.callee.body,y.slice(m.range[0],m.range[1]).join("")),c,d,v)}module.exports=p;
},{"esprima":"EB52","uniq":"Qijo"}],"ic9D":[function(require,module,exports) {
"use strict";var e=require("cwise-parser"),r=require("cwise-compiler"),o=["args","body"],n=["pre","post","printCode","funcName","blockSize"];function i(i){for(var s in i)o.indexOf(s)<0&&n.indexOf(s)<0&&console.warn("cwise: Unknown argument '"+s+"' passed to expression compiler");for(var c=0;c<o.length;++c)if(!i[o[c]])throw new Error("cwise: Missing argument: "+o[c]);return r({args:i.args,pre:e(i.pre||function(){}),body:e(i.body),post:e(i.post||function(){}),debug:!!i.printCode,funcName:i.funcName||i.body.name||"cwise",blockSize:i.blockSize||64})}module.exports=i;
},{"cwise-parser":"FHLp","cwise-compiler":"Ki0I"}],"4vNd":[function(require,module,exports) {
"use strict";var r=require("dup"),e=require("cwise"),a=e({args:["array","scalar","index"],body:function(r,e,a){var n,t=e;for(n=0;n<a.length-1;++n)t=t[a[n]];t[a[a.length-1]]=r}});module.exports=function(e){var n=r(e.shape);return a(e,n),n};
},{"dup":"HwLA","cwise":"ic9D"}],"Nf9n":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=t(require("ndarray"));function t(e){return e&&e.__esModule?e:{default:e}}function r(){let e=2*Math.random()-1,t=2*Math.random()-1,a=e*e+t*t;return 0==a||a>1?r():e*Math.sqrt(-2*Math.log(a)/a)}function a(t,a){let n=new Float64Array(t*a);for(let e=0;e<n.length;e++)n[e]=1e-4*r();return(0,e.default)(n,[t,a])}
},{"ndarray":"GxWY"}],"M65e":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var t=e(require("ndarray")),r=e(require("cwise"));function e(t){return t&&t.__esModule?t:{default:t}}let s=(0,r.default)({args:["array","array"],pre:function(t,r){this.sum=0},body:function(t,r){var e=t-r;this.sum+=e*e},post:function(t,r){return Math.sqrt(this.sum)}}),a=(0,r.default)({args:["array","array"],pre:function(t,r){this.sum=0},body:function(t,r){this.sum+=Math.abs(t-r)},post:function(t,r){return this.sum}}),i=(0,r.default)({args:["array","array"],pre:function(t,r){this.tf=0,this.tt=0},body:function(t,r){var e=Math.round(t),s=Math.round(r);this.tf+=+(e!=s),this.tt+=+(1==e&&1==s)},post:function(t,r){return this.tf+this.tt===0?1:this.tf/(this.tf+this.tt)}}),n=(0,r.default)({args:["array","array"],pre:function(t,r){this.tf=0,this.tt=0},body:function(t,r){var e=Math.round(t),s=Math.round(r);this.tf+=+(e!=s),this.tt+=+(1==e&&1==s)},post:function(t,r){return this.tf+this.tt===0?1:this.tf/(this.tf+2*this.tt)}});function u(r,e){let u=r.shape[0],l=(0,t.default)(new Float64Array(u*u),[u,u]);switch(e){case"euclidean":for(let t=0;t<u;t++)for(let e=t+1;e<u;e++){let a=s(r.pick(t,null),r.pick(e,null));l.set(t,e,a),l.set(e,t,a)}break;case"manhattan":for(let t=0;t<u;t++)for(let e=t+1;e<u;e++){let s=a(r.pick(t,null),r.pick(e,null));l.set(t,e,s),l.set(e,t,s)}break;case"jaccard":for(let t=0;t<u;t++)for(let e=t+1;e<u;e++){let s=i(r.pick(t,null),r.pick(e,null));l.set(t,e,s),l.set(e,t,s)}break;case"dice":for(let t=0;t<u;t++)for(let e=t+1;e<u;e++){let s=n(r.pick(t,null),r.pick(e,null));l.set(t,e,s),l.set(e,t,s)}}return l}
},{"ndarray":"GxWY","cwise":"ic9D"}],"CXlo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=a(require("ndarray")),t=a(require("ndarray-ops"));function a(e){return e&&e.__esModule?e:{default:e}}const r=1e-7,l=Number.EPSILON||2.220446049250313e-16,u=1e-5;function o(a,o){let s,f,d,n,i,g,p=a.shape[0],M=(0,e.default)(new Float64Array(p*p),[p,p]),h=(0,e.default)(new Float64Array(p*p),[p,p]),c=1/0,x=0,y=Math.log(o);for(let e=0;e<p;e++){s=1,f=-1/0,c=1/0;for(let t=0;t<100;t++){for(let t=0;t<p;t++)M.set(e,t,Math.exp(-a.get(e,t)*s));M.set(e,e,0),i=0;for(let t=0;t<p;t++)i+=M.get(e,t);0==i&&(i=r),g=0;for(let t=0;t<p;t++)M.set(e,t,M.get(e,t)/i),g+=a.get(e,t)*M.get(e,t);if(d=(n=Math.log(i)+s*g)-y,Math.abs(d)<=u)break;d>0?(f=s,c==1/0?s*=2:s=(s+c)/2):(c=s,f==-1/0?s/=2:s=(s+f)/2)}x+=s}t.default.add(h,M,M.transpose(1,0));let b=Math.max(t.default.sum(h),l);return t.default.divseq(h,b),t.default.maxseq(h,l),h}
},{"ndarray":"GxWY","ndarray-ops":"isho"}],"6Q8P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=f;var e=u(require("ndarray")),a=u(require("ndarray-ops")),t=u(require("cwise")),l=u(require("./pairwise-distances"));function u(e){return e&&e.__esModule?e:{default:e}}const d=Number.EPSILON||2.220446049250313e-16;let r=(0,t.default)({args:["array"],body:function(e){e*=e}});function f(t,u,f){let s=t.shape[0],n=t.shape[1],i=(0,e.default)(new Float64Array(s*s),[s,s]),o=(0,l.default)(t,"euclidean");r(o);let q=(f+1)/-2;a.default.powseq(a.default.divseq(a.default.addseq(o,1),f),q);for(let e=0;e<s;e++)o.set(e,e,0);let p=Math.max(a.default.sum(o),d);a.default.divs(i,o,p),a.default.maxseq(i,d);let c=(0,e.default)(new Float64Array(s*s),[s,s]),y=(0,e.default)(new Float64Array(s*s),[s,s]);a.default.div(c,u,i),a.default.logeq(c),a.default.assign(y,u);let m=a.default.sum(a.default.muleq(c,y)),w=(0,e.default)(new Float64Array(t.size),t.shape),g=(0,e.default)(new Float64Array(s*s),[s,s]);a.default.sub(g,u,i),a.default.muleq(g,o);for(let l=0;l<s;l++)for(let u=0;u<n;u++){let d=(0,e.default)(new Float64Array(t.shape[0]),[t.shape[0]]);a.default.assign(d,t.pick(null,u)),a.default.addseq(a.default.negeq(d),t.get(l,u)),a.default.muleq(d,g.pick(l,null)),w.set(l,u,a.default.sum(d))}let h=2*(f+1)/f;return a.default.mulseq(w,h),[m,w]}
},{"ndarray":"GxWY","ndarray-ops":"isho","cwise":"ic9D","./pairwise-distances":"M65e"}],"liuD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("events"),e=h(require("ndarray")),i=h(require("ndarray-ops")),a=h(require("ndarray-pack")),s=h(require("ndarray-unpack")),r=h(require("cwise")),u=h(require("./randn")),n=h(require("./pairwise-distances")),d=h(require("./joint-probabilities")),l=h(require("./kl-divergence"));function h(t){return t&&t.__esModule?t:{default:t}}class p extends t.EventEmitter{constructor(t){super(),t=t||{},this.dim=t.dim||2,this.perplexity=t.perplexity||30,this.earlyExaggeration=t.earlyExaggeration||4,this.learningRate=t.learningRate||1e3,this.nIter=t.nIter||1e3,this.metric=t.metric||"euclidean",this.barneshut=t.barneshut||!1,this.inputData=null,this.outputEmbedding=null}init(t){let i=(t=t||{}).data||[],s=t.type||"dense";if("dense"===s)this.inputData=(0,a.default)(i);else{if("sparse"!==s)throw new Error("input data type must be dense or sparse");{let t=[],a=1;for(let e=0;e<i[0].length;e++){let s=Math.max.apply(null,i.map(t=>t[e]))+1;t.push(s),a*=s}this.inputData=(0,e.default)(new Float64Array(a),t);for(let e of i)this.inputData.set(...e,1)}}this.outputEmbedding=(0,u.default)(this.inputData.shape[0],this.dim)}run(){this.emit("progressStatus","Calculating pairwise distances"),this.distances=(0,n.default)(this.inputData,this.metric),this.emit("progressStatus","Calculating joint probabilities"),this.alpha=Math.max(this.dim-1,1),this.P=(0,d.default)(this.distances,this.perplexity);let t=Number.MAX_VALUE,e=0;return this.emit("progressStatus","Early exaggeration with momentum 0.5"),i.default.mulseq(this.P,this.earlyExaggeration),[t,e]=this._gradDesc(e,50,.5,0,0),this.emit("progressStatus","Early exaggeration with momentum 0.8"),[t,e]=this._gradDesc(e+1,100,.8,0,0),this.emit("progressStatus","Final optimization with momentum 0.8"),i.default.divseq(this.P,this.earlyExaggeration),[t,e]=this._gradDesc(e+1,this.nIter,.8,1e-6,1e-6),this.emit("progressStatus","Optimization end"),[t,e]}rerun(){this.outputEmbedding=(0,u.default)(this.inputData.shape[0],this.dim);let[t,e]=this.run();return[t,e]}getOutput(){return(0,s.default)(this.outputEmbedding)}getOutputScaled(){let t=(0,e.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),a=(0,e.default)(new Float64Array(this.outputEmbedding.shape[0]),[this.outputEmbedding.shape[0]]);for(let e=0;e<this.outputEmbedding.shape[1];e++){let s=i.default.sup(i.default.abs(a,this.outputEmbedding.pick(null,e)));i.default.divs(t.pick(null,e),this.outputEmbedding.pick(null,e),s)}return(0,s.default)(t)}_gradDesc(t,a,s,u=1e-6,n=1e-6){let d=(0,e.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),h=new Float64Array(this.outputEmbedding.size);for(let e=0;e<h.length;e++)h[e]=1;let p,o=(0,e.default)(h,this.outputEmbedding.shape),m=Number.MAX_VALUE,g=Number.MAX_VALUE,f=0,b=(0,r.default)({args:["array"],pre:function(t){this.sum=0},body:function(t){this.sum+=t*t},post:function(t){return Math.sqrt(this.sum)}}),c=(0,r.default)({args:["array","array","array"],body:function(t,e,i){e*i>=0?t+=.05:t*=.95,t=Math.max(t,.01)}});for(p=t;p<a;p++){let[t,a]=(0,l.default)(this.outputEmbedding,this.P,this.alpha),r=Math.abs(t-m);m=t;let h=b(a);if(this.emit("progressIter",[p,m,h]),m<g)g=m,f=p;else if(p-f>30)break;if(u>=h)break;if(n>=r)break;c(o,d,a),i.default.muleq(a,o);let y=(0,e.default)(new Float64Array(a.size),a.shape);i.default.muls(y,a,this.learningRate),i.default.mulseq(d,s),i.default.subeq(d,y),i.default.addeq(this.outputEmbedding,d),this.emit("progressData",this.getOutputScaled())}return[m,p]}}var o=p;exports.default=o;
},{"events":"wIHY","ndarray":"GxWY","ndarray-ops":"isho","ndarray-pack":"Ibk7","ndarray-unpack":"4vNd","cwise":"ic9D","./randn":"Nf9n","./pairwise-distances":"M65e","./joint-probabilities":"CXlo","./kl-divergence":"6Q8P"}],"PleC":[function(require,module,exports) {
"use strict";function e(){let e=0;const t=new Map;return{getCallback:function(){const r=++e;let n={resolve:null,reject:null};const a=new Promise((e,t)=>(n.resolve=e,n.reject=t));return t.set(r,({type:e,payload:a})=>{t.delete(r),n[e](a)}),{id:r,promise:a}},answerCallback:function(e){const r=t.get(e.id);if(!r)throw Error(`callback gone: ${e.id}`);r(e)}}}function t(t,r){const{getCallback:n,answerCallback:a}=e(),o=new Proxy({},{has:(e,t)=>"string"==typeof t,get(e,r){if("string"==typeof r)return(...e)=>{const{id:a,promise:o}=n();return t.postMessage({type:"call",rpc:{name:r,args:e,id:a}}),o}}});let s;return t.addEventListener("message",e=>{"callback"===e.data.type?a(e.data.cb):"call"===e.data.type?async function(e){s||(s=await r);const n={type:"resolve",id:e.id,payload:null};try{if("function"!=typeof s[e.name])throw Error(`No RPC method "${e.name}" found`);n.payload=await s[e.name](...e.args)}catch(a){n.type="reject",a instanceof Error&&(a={message:a.message,name:a.name,stack:a.stack}),n.payload=a}finally{t.postMessage({type:"callback",cb:n})}}(e.data.rpc):console.warn("unknown message",e)}),o}function r(e){if("undefined"==typeof self||"undefined"==typeof importScripts)throw Error("Call this function from a worker script");let r;e(t(self,new Promise(e=>r=e))).then(e=>(Object.assign(self,{typedWorker:e}),e)).then(r)}function n(e,r){if("undefined"==typeof window)throw Error("call this function from the main browser thread");const n=t(e,Promise.resolve(r)),a=Object.create(n);return a.worker=e,a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.declareWorker=r,exports.createWorker=n;
},{}],"/Dpp":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const r=e(require("../tsne-js/src/index.js")),t=require("./simple-typed-worker"),s=1/30;t.declareWorker(async e=>{const t=new r.default;Object.assign(globalThis,{model:t});let s=performance.now();t.on("progressIter",r=>{for(;performance.now()-s<30;);s=performance.now(),e.progressIter(r)}),t.on("progressStatus",function(r){e.progressStatus(r)}),t.on("progressData",function(r){e.progressData(r)});var n=!0;return{async setData(e){t.init({data:e,type:"dense"})},run:async e=>(Object.assign(t,e),n?(t.run(),n=!1):t.rerun(),t.getOutputScaled())}});
},{"../tsne-js/src/index.js":"liuD","./simple-typed-worker":"PleC"}]},{},["/Dpp"], null)
//# sourceMappingURL=tsneWorker.3724f103.js.map